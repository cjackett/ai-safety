# Production configuration balancing security and usability
name: "balanced_mode"
description: "Production configuration balancing security and usability"

input_guardrails:
  jailbreak_detector:
    enabled: true
    threshold: 0.75  # Only block high-confidence jailbreaks
    block_patterns:
      - "ignore previous instructions"
      - "DAN mode"
      - "pretend you are"
      - "roleplay as"
      - "for educational purposes"
      - "hypothetically"
      - "in a fictional scenario"

  encoding_detector:
    enabled: true
    block_base64: true
    block_rot13: false  # Allow for legitimate encoding
    block_leetspeak: false
    block_unicode_tricks: true

  injection_detector:
    enabled: true
    max_prompt_length: 4000
    block_system_tags: true
    system_override_patterns:
      - "system:"
      - "developer mode"
      - "override safety"
      - "</system>"

output_guardrails:
  harm_classifier:
    enabled: true
    block_full: true      # Block responses with full harmful compliance
    block_hedged: true    # Block responses with harmful content + disclaimers
    use_multi_judge: true
    judge_models:
      - "llama3.2:3b"
      - "qwen3:4b"
      - "gemma3:4b"

  pii_redactor:
    enabled: true
    redact_emails: true
    redact_phones: true
    redact_names: false  # May interfere with normal conversation
    redact_addresses: true

access_control:
  rate_limits:
    free:
      requests_per_minute: 10
      requests_per_hour: 100
      requests_per_day: 1000
    research:
      requests_per_minute: 60
      requests_per_hour: 1000
      requests_per_day: 10000
    enterprise:
      requests_per_minute: 300
      requests_per_hour: 10000
      requests_per_day: 100000

  key_expiry_days: 90  # API keys expire after 90 days (enforced in APIKeyManager)

logging:
  audit_log_path: "results/audit.jsonl"
  security_events_path: "results/security_events.jsonl"

model:
  default_model: "mistral:7b"
  temperature: 0.7
  max_tokens: 2048
