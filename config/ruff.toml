# Line Length
line-length = 120

# Target Python Version
target-version = "py312"

# Output configuration
output-format = "concise"

# Exclude directories and files
exclude = [
    ".git",
    "__pycache__",
    "build",
    "dist",
    "temp",
    "docs/**/*",
]

# Enable all rules by default
lint.select = ["ALL"]

# McCabe complexity configuration
lint.mccabe.max-complexity = 10

# Pydocstyle configuration
lint.pydocstyle.convention = "google"

# Ignore specific rules with explanations
lint.ignore = [
    "B008",    # Do not perform function calls in argument defaults
    "D104",    # Missing docstring in public package
    "D200",    # One-line docstring should fit on one line with quotes
    "D203",    # 1 blank line required before class docstring
    "D212",    # Multi-line docstring summary should start at the first line
    "D413",    # Missing blank line after last section
    "FBT001",  # Boolean positional arg in function call
    "FBT003",  # Boolean positional arg in function definition
    "FIX002",  # Line contains TODO
    "G004",    # Logging statement uses f-string
    "PLR0913", # Too many arguments in function definition
    "S603",    # `subprocess` call: check for execution of untrusted input
    "TD003",   # Missing issue link on TODO
]

# Per-file ignores
[lint.per-file-ignores]
"tests/**" = [
    "ANN001",  # Missing type annotation for function argument (test functions don't need full annotations)
    "ANN201",  # Missing return type annotation for public function (test functions don't need return annotations)
    "ANN202",  # Missing return type annotation for private function (test helpers don't need annotations)
    "ANN401",  # Dynamically typed expressions (Any) are acceptable in test mocks
    "ARG002",  # Unused method argument (test mocks may have unused args)
    "C901",    # Function is too complex (test functions can be complex)
    "D100",    # Missing docstring in public module (test modules don't need docstrings)
    "D102",    # Missing docstring in public method (test methods don't need docstrings)
    "D103",    # Missing docstring in public function (test functions don't need docstrings)
    "D107",    # Missing docstring in __init__ (test classes don't need __init__ docstrings)
    "D417",    # Missing argument description in docstring (pytest fixtures like 'mocker' are self-documenting)
    "PLC0415", # Import should be at top-level (acceptable in tests for avoiding circular imports and test-specific imports)
    "PLR2004", # Magic value used in comparison (acceptable in tests for clarity - small numbers like len() == 2 are readable)
    "PT012",   # pytest.raises() block should contain single statement (conflicts with EM101 - variable assignment for exception messages)
    "S101",    # Use of `assert` detected (assert is standard in tests)
    "S105",    # Possible hardcoded password (test credentials are acceptable)
    "S106",    # Possible hardcoded password assigned to argument (test credentials are acceptable)
    "S108",    # Probable insecure usage of temporary file (acceptable in tests)
    "SLF001",  # Private member accessed (tests often need to access private members)
]
